<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>网页组件制作之弹出层 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="网页组件制作之弹出层
在该笔记中将学到列表展示中弹出层特效的方法与展示效果
本系列的是参考慕课网 清风老师的视频，仅供个人查阅使用，具体讲解推荐参考视频。
涉及的知识点
定位：absolute, relative, fixed
事件：onload, onclick
DOM操作：scrollHeight(), clientHeight()
层级：z-index

遮罩层的实现遮罩层的长度和宽度，可以">
<meta property="og:type" content="article">
<meta property="og:title" content="网页组件制作之弹出层">
<meta property="og:url" content="http://yoursite.com/2016/12/16/网页组件制作之弹出层/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="网页组件制作之弹出层
在该笔记中将学到列表展示中弹出层特效的方法与展示效果
本系列的是参考慕课网 清风老师的视频，仅供个人查阅使用，具体讲解推荐参考视频。
涉及的知识点
定位：absolute, relative, fixed
事件：onload, onclick
DOM操作：scrollHeight(), clientHeight()
层级：z-index

遮罩层的实现遮罩层的长度和宽度，可以">
<meta property="og:image" content="http://ofjjubwp5.bkt.clouddn.com/image/png/img72.PNG">
<meta property="og:updated_time" content="2016-12-16T11:34:53.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="网页组件制作之弹出层">
<meta name="twitter:description" content="网页组件制作之弹出层
在该笔记中将学到列表展示中弹出层特效的方法与展示效果
本系列的是参考慕课网 清风老师的视频，仅供个人查阅使用，具体讲解推荐参考视频。
涉及的知识点
定位：absolute, relative, fixed
事件：onload, onclick
DOM操作：scrollHeight(), clientHeight()
层级：z-index

遮罩层的实现遮罩层的长度和宽度，可以">
<meta name="twitter:image" content="http://ofjjubwp5.bkt.clouddn.com/image/png/img72.PNG">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-网页组件制作之弹出层" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/16/网页组件制作之弹出层/" class="article-date">
  <time datetime="2016-12-16T11:32:45.000Z" itemprop="datePublished">2016-12-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/coding/">coding</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      网页组件制作之弹出层
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>网页组件制作之弹出层</p>
<p><strong>在该笔记中将学到列表展示中弹出层特效的方法与展示效果</strong></p>
<p>本系列的是参考<a href="http://www.imooc.com/u/105292/courses?sort=publish" target="_blank" rel="external">慕课网 清风</a>老师的视频，仅供个人查阅使用，具体讲解推荐参考视频。</p>
<h2 id="涉及的知识点"><a href="#涉及的知识点" class="headerlink" title="涉及的知识点"></a>涉及的知识点</h2><ul>
<li>定位：absolute, relative, fixed</li>
<li>事件：onload, onclick</li>
<li>DOM操作：scrollHeight(), clientHeight()</li>
<li>层级：z-index</li>
</ul>
<h3 id="遮罩层的实现"><a href="#遮罩层的实现" class="headerlink" title="遮罩层的实现"></a>遮罩层的实现</h3><p>遮罩层的长度和宽度，可以设置为 100%，或者使用 srcollHeight 计算高度。遮罩层使用 position:fixed，可以在滚动的时候也覆盖页面，用 z-index 设置遮罩层为最上层。</p>
<p>实现效果如下：</p>
<p><img src="http://ofjjubwp5.bkt.clouddn.com/image/png/img72.PNG" alt=""></p>
<a id="more"></a>
<p>代码如下：</p>
<pre><code>&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot;&gt;
        &lt;title&gt;海报画廊&lt;/title&gt;
        &lt;style type=&quot;text/css&quot;&gt;
            *{padding: 0; margin: 0;font-size: 14px;}
            body{border: 1px solid rebeccapurple;}
            .wrap{width: 800px;height: 400px;margin: 100px auto;border: 1px solid rebeccapurple;overflow: hidden;
            perspective: 800px;-webkit-perspective:800px;background-color: #666;}
            .photo{width: 160px;height: 190px;position: absolute;box-shadow: 0 0 1px rgba(0, 0, 0, 0.01);cursor: pointer;transition: all 0.5s;}
            .photo .side-front{padding: 10px;position: absolute;}
            .photo .side-front img{width: 140px;height: 150px;display: block;margin: 0 auto;border: 1px solid #aaa;}
            .photo .side-front p{display: block;height: 30px;line-height: 30px;text-align: center;color: #333;font-size: 12px}
            .photo .side-back{padding: 10px;position: absolute;width: 140px;height: 170px;overflow: hidden;background-color: #ddd;}
            .photo .side-back p{color: #666;font-size: 12px;line-height: 1.5em;}
            .photo-center{top: 50%; left: 50%;margin: -80px 0 0 -95px;-webkit-transform: rotateY(0deg);z-index: 1;}
            /*设置图片旋转的效果*/
            .photo-wrap{-webkit-transform-style: preserve-3d;-webkit-backface-visibility: hidden;width: 100%;height: 100%;transition: all 0.6s;border: 1px solid #aaa;}
            .photo-wrap .side-front{-webkit-transform: rotateY(0deg);}
            .photo-wrap .side-back{-webkit-transform: rotateY(180deg);}
            .photo-f .photo-wrap{-webkit-transform: rotateY(0deg);}
            .photo-b .photo-wrap{-webkit-transform: rotateY(180deg);}
            .nav{width: 100%;height: 26px;line-height: 26px;position: absolute; bottom: 36px;text-align: center;}
            .nav-i{display: inline-block;background-color: #333;width: 26px;height: 26px;border-radius: 13px;margin:0 10px;cursor: pointer;transform: scale(0.5);}
            .nav-current{transform: scale(0.8);}
            body{height: 1000px;}
            #mask{height: 100%; width: 100%; background-color: rgba(0, 0, 0, 0.75);position: fixed;top: 0; left: 0;z-index: 2;}
            #mask-login{height: 190px;width: 320px;background-color: #fff;margin: 150px auto;position: relative;}
            #mask-close{display: block;height: 20px;width: 20px;background-color: red;font-size: 10px;color: #fff;line-height: 20px;text-align: 
            center;position: absolute;top: 5px;right: 5px;cursor: pointer;}
        &lt;/style&gt;
        &lt;!--add jQuery--&gt;
        &lt;script src=&quot;http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.0.js&quot;&gt;&lt;/script&gt;
        &lt;script src=&quot;test.js&quot;&gt;&lt;/script&gt;
        &lt;script&gt;
            function turnPage(elem){
            let className = elem.className;
            if(/photo-f/.test(className)){
                className = className.replace(&quot;photo-f&quot;, &quot;photo-b&quot;);
            } else {
                className = className.replace(&quot;photo-b&quot;, &quot;photo-f&quot;);
            }
            elem.className = className;
        }

        function randomInt(min, max){
            let diff = max-min+1;
            return Math.ceil(Math.random()*diff + min - 1);
        }

        function randomArray(arr){
            let rArr = [];
            do{
                let index = randomInt(0, arr.length-1);
                rArr.push(arr.splice(index,1).pop());
            }while(arr.length&gt;0)
            return rArr;
        }

        function range(){
            let range = { left:{x:[], y:[]}, right:{x:[], y:[]}};

            let wrap = {
                width:document.getElementById(&quot;wrap&quot;).clientWidth,
                height:document.getElementById(&quot;wrap&quot;).clientHeight
            }; 
            let photo = {
                width:document.getElementsByClassName(&quot;photo&quot;)[0].clientWidth,
                height:document.getElementsByClassName(&quot;photo&quot;)[0].clientHeight
            };

            range.left.x.push(0-photo.width/2);
            range.left.x.push(wrap.width/2-photo.width);
            range.left.y.push(0-photo.height/2);
            range.left.y.push(wrap.height-photo.height/2);

            range.right.x.push(wrap.width/2+photo.width/2);
            range.right.x.push(wrap.width-photo.width/2);
            range.right.y.push(0-photo.height/2);
            range.right.y.push(wrap.height-photo.height/2);
            return range;
        }

        //根据index 选择对应的 photo，index的值从1-data.length
        function setCenter(index){
            let photos = document.getElementsByClassName(&quot;photo&quot;);
            let photo = photos[index-1];
            for(let i=0;i&lt;photos.length;i++){
                photos[i].className = photos[i].className.replace(&quot; photo-center&quot;, &quot;&quot;);
                photos[i].style.left = &quot;&quot;;
                photos[i].style.top = &quot;&quot;;
                photos[i].style[&apos;-webkit-transform&apos;] = &quot;rotateY(0deg)&quot;;
                photos[i].className = photos[i].className.replace(&quot; photo-b&quot;, &quot; photo-f&quot;);
            }
            photo.className += &quot; photo-center&quot;;
        }

        function setLeftRight(index){ 

            let r= range();
            let _photos = document.getElementsByClassName(&quot;photo&quot;);
            let photos = [];
            for (let i=0; i&lt;_photos.length; i++){
                if(i!== (index-1))
                photos.push(_photos[i]);
                _photos[i].className = _photos[i].className.replace(&quot; photo-b&quot;, &quot; photo-f&quot;);
            }
            photos = randomArray(photos);
            let photoLeft = photos.splice(Math.ceil(photos.length/2), Math.ceil(photos.length/2));
            let photoRight = photos;
            for(let i=0; i&lt;photoLeft.length; i++){
                let photo = photoLeft[i];
                photo.style.left = randomInt(r.left.x[0], r.left.x[1]) + &quot;px&quot;;
                photo.style.top = randomInt(r.left.y[0], r.left.y[1]) + &quot;px&quot;;
                photo.style[&apos;-webkit-transform&apos;] = &apos;rotate(&apos;+randomInt(-60, 60) + &apos;deg)&apos;;
            }
            for(let i=0; i&lt;photoRight.length; i++){
                let photo = photoRight[i];
                photo.style.left = randomInt(r.right.x[0], r.right.x[1]) + &quot;px&quot;;
                photo.style.top = randomInt(r.right.y[0], r.right.y[1]) + &quot;px&quot;;
                photo.style[&apos;-webkit-transform&apos;] = &apos;rotate(&apos;+randomInt(-60, 60) + &apos;deg)&apos;;
            }
        }




        let data = [
            {img : &quot;http://ofjjubwp5.bkt.clouddn.com/image/jpg/1.jpg&quot;,title : &quot;照片1&quot;,desc : &quot;照片1的描述&quot;},
            {img : &quot;http://ofjjubwp5.bkt.clouddn.com/image/jpg/2.jpg&quot;,title : &quot;照片2&quot;,desc : &quot;照片2的描述&quot;},
            {img : &quot;http://ofjjubwp5.bkt.clouddn.com/image/jpg/3.jpg&quot;,title : &quot;照片3&quot;,desc : &quot;照片3的描述&quot;},
            {img : &quot;http://ofjjubwp5.bkt.clouddn.com/image/jpg/4.jpg&quot;,title : &quot;照片4&quot;,desc : &quot;照片4的描述&quot;},
            {img : &quot;http://ofjjubwp5.bkt.clouddn.com/image/jpg/5.jpg&quot;,title : &quot;照片5&quot;,desc : &quot;照片5的描述&quot;},
            {img : &quot;http://ofjjubwp5.bkt.clouddn.com/image/jpg/6.jpg&quot;,title : &quot;照片6&quot;,desc : &quot;照片6的描述&quot;},
            {img : &quot;http://ofjjubwp5.bkt.clouddn.com/image/jpg/7.jpg&quot;,title : &quot;照片7&quot;,desc : &quot;照片7的描述&quot;},
            {img : &quot;http://ofjjubwp5.bkt.clouddn.com/image/jpg/8.jpg&quot;,title : &quot;照片8&quot;,desc : &quot;照片8的描述&quot;},
            {img : &quot;http://ofjjubwp5.bkt.clouddn.com/image/jpg/9.jpg&quot;,title : &quot;照片9&quot;,desc : &quot;照片9的描述&quot;},
            {img : &quot;http://ofjjubwp5.bkt.clouddn.com/image/jpg/10.jpg&quot;,title : &quot;照片10&quot;,desc : &quot;照片10的描述&quot;},
            {img : &quot;http://ofjjubwp5.bkt.clouddn.com/image/jpg/11.jpg&quot;,title : &quot;照片11&quot;,desc : &quot;照片11的描述&quot;},
            {img : &quot;http://ofjjubwp5.bkt.clouddn.com/image/jpg/12.jpg&quot;,title : &quot;照片12&quot;,desc : &quot;照片12的描述&quot;},
            {img : &quot;http://ofjjubwp5.bkt.clouddn.com/image/jpg/13.jpg&quot;,title : &quot;照片13&quot;,desc : &quot;照片13的描述&quot;},
            {img : &quot;http://ofjjubwp5.bkt.clouddn.com/image/jpg/14.jpg&quot;,title : &quot;照片14&quot;,desc : &quot;照片14的描述&quot;},
            {img : &quot;http://ofjjubwp5.bkt.clouddn.com/image/jpg/15.jpg&quot;,title : &quot;照片15&quot;,desc : &quot;照片15的描述&quot;}
        ];

        window.onload = function(){

            //批处理生成照片
            let template = document.getElementById(&quot;photos&quot;).innerHTML;
            let navs = document.getElementById(&quot;navs&quot;);
            let navTemplate = navs.innerHTML;
            let htmlColl = [];
            let navColl = [];
            for(let i=0;i&lt;data.length;i++){
                let html = template.replace(&quot;{{index}}&quot;, i+1).replace(&quot;{{img}}&quot;, data[i].img).replace(&quot;{{title}}&quot;, data[i].title).replace(&quot;{{desc}}&quot;, data[i].desc);
                htmlColl.push(html);
                let nav = navTemplate.replace(&quot;{{index}}&quot;, i+1);
                navColl.push(nav);
            }
            document.getElementById(&quot;photos&quot;).innerHTML = htmlColl.join(&quot;&quot;);
            navs.innerHTML = navColl.join(&quot;&quot;);
            let navIs = document.getElementsByClassName(&quot;nav-i&quot;);
            for(let i=0; i&lt;navIs.length; i++){
                navIs[i].onclick = function(){                    
                    let photos = document.getElementsByClassName(&quot;photo&quot;);
                    if(/nav-current/.test(this.className)){
                        let className = photos[i].className;
                        if(/photo-f/.test(className)){
                            photos[i].className = className.replace(&quot; photo-f&quot;, &quot; photo-b&quot;);
                        } else{
                            photos[i].className = className.replace(&quot; photo-b&quot;, &quot; photo-f&quot;);
                        }
                    } else{
                        let This = this;
                        let navIs = document.getElementsByClassName(&quot;nav-i&quot;);
                        for(let j=0;j&lt;navIs.length;j++){
                            navIs[j].className = navIs[j].className.replace(&quot; nav-current&quot;, &quot;&quot;);
                        }
                        This.className += &quot; nav-current&quot;;
                        setCenter(i+1); 
                        setLeftRight(i+1);

                    }

                }
            }

            //在开始的时候，随机选取一张照片放在中间区域
            let c = randomInt(1, 8);
            setCenter(c);
            setLeftRight(c);

            //处理遮罩层
            let maskClose = document.getElementById(&quot;mask-close&quot;);
            maskClose.onclick = function () {
                let mask = document.getElementById(&quot;mask&quot;);
                mask.style.visibility = &quot;hidden&quot;;
            }
        }
        &lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div id=&quot;mask&quot;&gt;
            &lt;div id=&quot;mask-login&quot;&gt;
                &lt;i id=&quot;mask-close&quot;&gt;关&lt;/i&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;wrap&quot; id=&quot;wrap&quot;&gt;
            &lt;!-- photo 负责平移和旋转--&gt;  
            &lt;div id=&quot;photos&quot;&gt;
                &lt;div class=&quot;photo photo-f&quot; onclick=&quot;turnPage(this)&quot; id=&quot;photo-{{index}}&quot;&gt;
                    &lt;!-- photo-wrap 负责照片的翻转--&gt;
                    &lt;div class=&quot;photo-wrap&quot;&gt;
                        &lt;div class=&quot;side-front&quot;&gt;
                            &lt;img src=&quot;{{img}}&quot; alt=&quot;&quot;&gt;
                            &lt;p&gt;{{title}}&lt;/p&gt;
                        &lt;/div&gt;
                        &lt;div class=&quot;side-back&quot;&gt;
                            &lt;p&gt;{{desc}}&lt;/p&gt;
                        &lt;/div&gt;                                   
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;          
            &lt;div class=&quot;nav&quot; id=&quot;navs&quot;&gt;
                &lt;i class=&quot;nav-i&quot; id=&quot;nav-{{index}}&quot;&gt;&lt;/i&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/12/16/网页组件制作之弹出层/" data-id="cixkcmb3m001554wl7vgi1cqr" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS/">CSS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTML/">HTML</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/12/17/网页组件制作之固定边栏滚动特效/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          网页组件制作之固定边栏滚动特效
        
      </div>
    </a>
  
  
    <a href="/2016/12/07/jQuery笔记/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">jQuery笔记</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/coding/">coding</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/">HTML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenVPN/">OpenVPN</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sass/">Sass</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jQuery/">jQuery</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/CSS/" style="font-size: 20px;">CSS</a> <a href="/tags/HTML/" style="font-size: 17.5px;">HTML</a> <a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/OpenVPN/" style="font-size: 10px;">OpenVPN</a> <a href="/tags/Sass/" style="font-size: 10px;">Sass</a> <a href="/tags/jQuery/" style="font-size: 12.5px;">jQuery</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/01/05/CSS-注意事项/">CSS-注意事项</a>
          </li>
        
          <li>
            <a href="/2017/01/02/CSS属性深入理解/">(no title)</a>
          </li>
        
          <li>
            <a href="/2016/12/29/Sass-笔记/"> Sass 笔记</a>
          </li>
        
          <li>
            <a href="/2016/12/27/网页组件制作之购物车效果/">网页组件制作之购物车效果</a>
          </li>
        
          <li>
            <a href="/2016/12/18/网页组件制作之图片剪切效果/">网页组件制作之图片剪切效果</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>